# منصة السفراء (Static) — جاهزة لـ GitHub + Netlify

منصة مخصصة للجوال بأسلوب Apple UI (Glass + Soft Cards)، وتعمل بدون سيرفر/قاعدة بيانات.
فكرة الدخول كما في المخطط: **لا توجد صفحة تسجيل دخول**؛ لكل سفير رابط مباشر `/s/<code>`.

## التشغيل محلياً
افتح `index.html` مباشرة أو شغّل أي Static Server.

## النشر على Netlify
- اربط الريبو
- Build command: (فارغ)
- Publish directory: `.`

> ملف `_redirects` يجعل الموقع SPA بحيث أي مسار يرجع لـ `index.html`.

## البيانات
- `data/ambassadors.json` : سجل السفراء + "مصفوفة الصلاحيات" (قائمة الإضافات المفعلة لكل سفير)
- `data/additions.json` : تعريف الإضافات (001,002,003...) وعناوينها ووصفها
- `data/content.json` : محتوى مركزي (رسالة النشر + صورة… إلخ)

## إضافة جديدة (Add-on)
1) أضف تعريفها في `data/additions.json`
2) أنشئ ملفها في `modules/additions/<ID>.js`
3) امنحها لصلاحيات سفير داخل `data/ambassadors.json`

## ملاحظة أمان
هذه نسخة Static: الرابط هو "مفتاح الوصول".
إذا رغبت حماية أقوى (تسجيل دخول/صلاحيات خادم)، نحتاج إضافة Backend (Netlify Functions / Supabase...).


## جلب بيانات الصناديق (إضافة 004)
- يعتمد على Netlify Function: `/.netlify/functions/goal`
- السبب: المتصفح يمنع قراءة صفحات donate.utq.org.sa مباشرة بسبب CORS، فنعمل Proxy من Netlify.

## تحديث النسخة النهائية (v2)
- واجهة الرئيسية أصبحت تتضمن عدّادًا بعدد السفراء + حقل "دخول سريع" بكود السفير.
- لوحة الإدارة أصبحت تعرض v2 مع تحقق تلقائي من تكرار كود السفير وصحة معرفات الإضافات قبل توليد JSON.
